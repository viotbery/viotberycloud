---
title: 空间数据采集与组织
mathjax: true
cover: https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221019195627602.png
categories: GIS
---
# 地理数据库的建立

## 地理数据库内数据类型

> 地理数据库按照层次型数据对象组织地理数据，包括对象类、要素类和要素数据集

### 对象类

对象类指存储非空间数据的表格（Table）

### 要素类

具有相同几何类型和属性的要素集合，即同类空间要素的集合。例如 `店铺信息.shp`存储许多店铺的点数据，就构成了一个点要素类，其中包含的一个个店铺点就是一个单独的要素。

### 要素数据集

共享空间参考系统并具有某种关系的多个要素类的集合，即要素类之间存在关系。一下三个方面应当考虑将要素组织在要素数据集中：

1. 不同要素类处于统一范畴。如全国尺度的水系点、面、线类型的要素应当储存至同一要素数据集中。
2. 在同一几何网络中充当连接点和边的各种要素类。如配电网络中的开关、电线、变压器中，其构成一个同一的模型，必须存在同一个要素数据集下。
3. 共享公共几何特征的要素类。如用地、水系、行政边界，当移动其中一个要素时，其公共部分的拓扑关系应当保持不变。

## 数据库中的基本组成项

### 简单要素类

简单要素类是建立在要素数据集中，使用公共的空间参考坐标系统和坐标值域。若建立要素类在要素数据集之外，那么就为**独立要素类**。

简单要素类的名称为“真名”，在文件管理器中显示真名。也可定义“别名”，在arcgis中作为图层名称。

### 表

即在数据库中建立关系表

# 进一步定义数据库

## 建立索引

可对要素建立空间索引以提高要素空间查询的速度，在arcgis中默认为新建的要素添加空间索引。

## 子类与值域

### 属性域

属性域指的是属性表达的范围，分为范围域和代码值域。范围域即指定一个范围的值域（有最大值和最小值）。代码值域可以给一个属性指定有效的取值集合（离散的自定义值或数据库中已定义的值）

### 子类

子类型根据要素类的属性值再次划分更小的分类，例如`店铺.shp`中有许多店铺要素，根据店铺的规模字段再将这些店铺要素分为三个类别：小型、中型、大型。arcgis中也可以根据不同的子类自动进行符号化。显然，对要素类划分子类不会产生新要素。

### 属性分割与合并

根据其属性值的分割规则将一个要素分割成两个要素，或将两个要素根据合并规则合并成一个要素。arcgis根据这些规则控制分割或合并后的属性值。

### 建立关系表

对象之间存在各种关系，例如宗地与业主、水管与水管维修记录等。这种关系存在空间对象之间、空间对象与非空间对象之间、非空间对象之间。对象各自都**具有自己的属性**，在其中建立关系首先需要确定**“公共”字段**，该字段不需要字段名相同，但要求**字段值的数据类型要一致**。

### 属性表操作

#### 连接操作

> 基于公共字段将图层连接到另一图层或表。 支持带有栅格属性表的要素图层、表视图和栅格图层。

实现连接操作有两种工具可以使用：**添加连接**和**连接字段**。前者是临时连接，连接始终驻留在图层中而不是与数据一起。后者则会修改原始数据

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221019195627602.png" alt="image-20221019195627602" style="zoom:33%;" />

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221019195657198.png" style="zoom:33%;" />

#### 关联操作

> 基于字段值将图层关联到另一图层或表。支持带有栅格属性表的要素图层、表视图和栅格图层。

同样的，“**添加关联**”工具也只是建立临时的关联关系，要建立永久性的关联关系，需要使用“创建关系类”**工具**

#### 连接与关联的区别

连接用于源表与连接表之间1对1或1对多的关系，而关联用于1对1、1对多、多对多的关系。此外可以选择“保留无匹配项”，此时未匹配的若干条信息的连接字段为空

## 注记类

注记类属于要素类，在建立要素类时选择要素类型为“注记”，可设置缩放尺寸、坐标系以及注记显示样式等。创建完成后，选择一定数量的图层要素，右键该图层-【选择】-【为选择的要素添加注记】 即可添加注记。

## 创建几何网络

### 几何网络概述

几何网络用于描述显示世界中人员流动、货物运输、信息传递等**可确定的网络系统**。网络系统内的所有要素都限制在内作为网络要素。很显然，这种特性必须要求几何网络应当基于要素数据集建立。

### 网络要素类型

几何网络要素类型包括边网络要素(Edge Network feature) 和连接网络要素(Junction Network feature)。连接网络要素讲边连接在一起。

### 源和汇

网络中的信息、能量、物质等的流动方向是由源到汇，由连接要素对应源和汇

### 网络权重

一个网络的权根据要素的某些属性来计算的，可以与一个要素的一个属性相关，也可以与多个要素的属性相关

### 有效和无效元素

几何网络中的任何一个要素的边或结合点都可以是有效或无效的，由Enabled的字段维护(Ture or False)

## 创建拓扑

拓扑表达的地理对象之间的相邻、包含、关联等空间关系。

拓扑关系存储以下三个参数：

### 规则(rule)

拓扑规则定义了拓扑的状态，控制要素之间的相互作用。

### 等级(rank)

等级是控制拓扑检验中节点移动的级别，等级低的要素类项等级高的要素类移动。最高为1，最低为50

### 拓扑容限

拓扑容限是节点、边能够被捕捉到一起的距离范围。

