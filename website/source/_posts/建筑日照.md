---
title: 建筑日照分析
mathjax: true
categories: GIS实例练习
---
### 数据

现有一城市某区域建筑数据（buildings.shp）和地块单元数据（parcel.shp

### 要求

(1)计算该地区各个单元的容积率容积率=建筑面积/用地面积(13.1)式中，建筑面积为各楼层建筑面积之和；用地面积为各地块单元(parcels..shp)面积。
(2)请找出不符合国家规定日照标准的建筑我国建筑日照标准有如下规定：一个建筑底层日照要至少满足在冬至这一天，在12:00~14:00能接收到太阳照射。已知，该地区纬度9为32°，太阳赤纬8计算公式为XXX（已给出）

### 步骤

#### 计算地块容积率

所用到的工具

- 【空间统计工具】
  - 【工具】
    - 【计算面积工具】
- 【分析工具】
  - 【叠加分析】
    - 【标识】

思路

首先使用【计算面积工具】计算每个建筑的总楼层面积，再使用【标识】工具用地块单元标识建筑数据，使建筑字段拥有所属地块单元的对应字段。再计算地块的面积，并连接两个数据的表，使用【字段计算器】计算地块容积率，最后取消连接。

注意：高版本的ArcMap无【计算面积工具】，可新建字段后使用【计算几何】计算面积

#### 找出不符合日照的建筑

思路

题目要求在这一天的12：00到14：00建筑能够接受到光照，为了简化模型，取三个时间点模拟阴影变化的范围，三个时间点的阴影区域总和即为该时间段的阴影区域。生成阴影在arcmap中需要使用【山体阴影工具】，但在使用之前需要确定在各个时间点，当地建筑的背光处。抽取背光面的高程数据对其做山体阴影。这又涉及到了【坡向】问题。计算出坡向后，根据当时太阳方位角A，结合背光角度范围$[A-90°，A+90°]$获得此时背光的一面。然后再使用山体阴影工具，输入相应的太阳高度角、方位角等参数，勾选【模拟阴影】生成当时的阴影范围。使用上述操作对13：00 14：00生成阴影。

将三个阴影范围合并，并进行重分类，0值区域标识有光照，1值表示阴影区。将阴影区转栅格，利用空间选择工具，使用该范围选取建筑的【质心】，得出的结果即为不符合光照条件的建筑。

注意：

建筑面转栅格中，需要将结果栅格的NoData重分类为0值，否则阴影将不完整。

