---
title: 网络分析
mathjax: true
cover: https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221024201424849.png
categories: GIS
---
### 创建交通网络数据集

交通网络数据集需要在要素数据集中创建，且在ArcgisPro中不允许创建未知坐标系的要素数据集，而在Arcmap中允许直接创建。因此若存在一批未知坐标系的数据，应先批量定义投影再创建要素数据集。以下是批量定义投影的模型：

<img src="../../../../../AppData/Roaming/Typora/typora-user-images/image-20221023184522200.png" alt="image-20221023184522200" style="zoom:33%;" />

成功创建要素数据集并导入数据后，可根据需要选择创建传输网络数据集（仅需传入路网）或设施网络数据集（又称几何网络。需要传入网络数据集的所有相关要素）。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023184708822.png" alt="image-20221023184708822" style="zoom:33%;" />

初次创建网络数据集或修改过网路数据集的属性后，需要使用【构建网络】重新构建网路数据集。

右键网络数据集选择【属性】，可修改网络数据集的【出行模式】、【阻抗】和【成本】等属性，修改后需要重新构建方可使用，若无法修改因确保图层未引用该网络数据集。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023191142937.png" alt="image-20221023191142937" style="zoom: 25%;" />

成本属性设置时间、距离等，若选择类别为【字段脚本】，可设置用`[道路中的字段名]`表示该段边使用字段中的数值作为成本。

设置【成本】以后，可在【出行模式】创建新的出行模式，在其中可选择网络分析时所用的成本和其他条件。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023191511921.png" alt="image-20221023191511921" style="zoom: 25%;" />

### 规划最佳路径

> 规划停靠点之间的最短路径或成本最低的路线。具体的成本可以是【路程】【时间】或停靠点的其他属性例如【卸货时间】、【商品重量】等。

解决公司班车问题，五角星处为公司，其他为员工所在地。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023185708316.png" alt="image-20221023185708316" style="zoom:25%;" />

考虑到班车的起点和终点均为公司，可控制导入【停靠点】的顺序，使公司在开头和结尾，再设置【路径分析】中的【顺序】为【保留第一个和最后一个停靠点】，即可控制起始点的顺序而不考虑中间停靠点的先后顺序。

![image-20221023192732128](https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023192732128.png)

导入停靠点后点击【运行】即可得到结果，若结果报错，请确认是否【修改网络数据集属性】但未重新【构建】这一情况。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023191701997.png" alt="image-20221023191701997" style="zoom:25%;" /><img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023185740095.png" alt="image-20221023185740095" style="zoom:25%;" />

上图中图二和图三的出行模式的成本分别为【路径】和【时间】

### 寻找最近的消防站

> 已知该地区一博物馆发生火灾，请找到能最快达到博物馆的消防站.本案例实际上是[最近设施查找]的问题

考虑到火灾这一情形，需要以【时间】为成本进行网络分析，将博物馆作为【事件点】、消防局作为【设施点】导入后，选择【出行模式】，方向参考如下，选择【远离设施点】

- 远离设施点

  \- 行驶方向从设施点到事件点。

  ![远离设施点](file:///E:/Programe/ArcgisPro/Resources/Help/zh-CN/pro-app/2.9/help/analysis/networks/GUID-93ECBA24-1038-43FE-88FD-DD3FB2AAF118-web.png)

  

- 朝向设施点

   \- 行驶方向从事件点到设施点。

  ![朝向设施点](https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/GUID-B00A3636-6C81-4BF1-870F-32825EAF6795-web.png)

点击运行获得结果

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023205426591.png" alt="image-20221023205426591" style="zoom:33%;" />

### 服务区分析

> 了解现有消防站的服务范围，请制作出每个消防站3分钟、5分钟**可到达的区域**，并指明现有的消防站**是否能够满足城市需求**

该案例属于服务区问题或可达性分析问题，在这个问题中【距离】是首要考虑的问题，因此以距离为成本距离。

将所有的消防站作为设施点导入，【中段】即以【成本】中的数值设置以生成多层服务区面。每层以逗号分割`3, 5, 15,`。还可以设置生成服务区面的精度和【边界类型】，下图边界类型分别是【重叠】、【融合】和【分割】

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023210340086.png" alt="image-20221023210340086" style="zoom:25%;" /><img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023210353520.png" alt="image-20221023210353520" style="zoom:25%;" /><img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023210547068.png" alt="image-20221023210547068" style="zoom:25%;" />

注意，在【输出几何】中，还有一个小的【面修剪距离】，表示该路径上生成的服务区会以该距离进行裁剪，上图默认为100m，下图是在上图三的基础上设置修建距离为200的结果。

<img src="https://markdown-img-1311240910.cos.ap-nanjing.myqcloud.com/image-20221023210753501.png" style="zoom:25%;" />

### 车辆多路径派发

> 当配送中心有多个站点需要配送，要以**最经济**的方式给多辆着分配派送点时，需要用到多路径派发



